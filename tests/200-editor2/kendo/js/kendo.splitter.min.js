/*
* Kendo UI Web v2012.2.710 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at http://kendoui.com/web-license
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function D(a){var b=this,d=a.orientation;b.owner=a,b._element=a.element,b.orientation=d,e(b,d===o?C:B),b._resizable=new c.ui.Resizable(a.element,{orientation:d,handle:a.element.children(".k-splitbar-draggable-"+d),hint:f(b._createHint,b),start:f(b._start,b),max:f(b._max,b),min:f(b._min,b),invalidClass:"k-restricted-size-"+d,resizeend:f(b._stop,b)})}function z(b,c){return function(d,e){var f=a(d).data(s);if(arguments.length==1)return f[b];f[b]=e;if(c){var g=this.element.data("kendoSplitter");g.trigger(m)}}}function y(a){return!w(a)&&!x(a)}function x(a){return h.test(a)}function w(a){return i.test(a)}var c=window.kendo,d=c.ui,e=a.extend,f=a.proxy,g=d.Widget,h=/^\d+(\.\d+)?px$/i,i=/^\d+(\.\d+)?%$/i,j="expand",k="collapse",l="contentLoad",m="resize",n="layoutChange",o="horizontal",p="vertical",q="mouseenter",r="click",s="pane",t="mouseleave",u="k-"+s,v="."+u,A=g.extend({init:function(b,c){var d=this,e=function(){d.trigger(m)};g.fn.init.call(d,b,c),d.wrapper=d.element,d.orientation=d.options.orientation.toLowerCase()!=p?o:p,d.bind(m,f(d._resize,d)),d._initPanes(),d._attachEvents(),a(window).resize(e),d.resizing=new D(d),d.element.triggerHandler("init.kendoSplitter")},events:[j,k,l,m,n],_attachEvents:function(){var b=this,c=b.options.orientation,d=".k-splitbar-draggable-"+c,e=".k-splitbar .k-icon:not(.k-resize-handle)",g=function(){b.trigger(m)};b.element.delegate(d,q,function(){a(this).addClass("k-splitbar-"+b.orientation+"-hover")}).delegate(d,t,function(){a(this).removeClass("k-splitbar-"+b.orientation+"-hover")}).delegate(d,"mousedown",function(){b._contentFrames(this).after("<div class='k-overlay' />")}).delegate(d,"mouseup",function(){b._contentFrames(this).next(".k-overlay").remove()}).delegate(e,q,function(){a(this).addClass("k-state-hover")}).delegate(e,t,function(){a(this).removeClass("k-state-hover")}).delegate(".k-splitbar .k-collapse-next, .k-splitbar .k-collapse-prev",r,b._arrowClick(k)).delegate(".k-splitbar .k-expand-next, .k-splitbar .k-expand-prev",r,b._arrowClick(j)).delegate(".k-splitbar","dblclick",f(b._dbclick,b)).parent().closest(".k-splitter").each(function(){var b=a(this),c=b.data("kendoSplitter");c?c.bind(m,g):b.one("init.kendoSplitter",function(){a(this).data("kendoSplitter").bind(m,g),g()})})},options:{name:"Splitter",orientation:o},_initPanes:function(){var b=this,c=b.options.panes||[];b.element.addClass("k-widget").addClass("k-splitter").children().addClass(u).each(function(d,e){var f=c&&c[d];e=a(e),e.data(s,f?f:{}).toggleClass("k-scrollable",f?f.scrollable!==!1:!0),b.ajaxRequest(e)}).end(),b.trigger(m)},ajaxRequest:function(b,d,e){b=a(b);var f=this,g=b.data(s);d=d||g.contentUrl,d&&(b.append("<span class='k-icon k-loading k-pane-loading' />"),c.isLocalUrl(d)?a.ajax({url:d,data:e||{},type:"GET",dataType:"html",success:function(a){b.html(a),f.trigger(l,{pane:b[0]})}}):b.removeClass("k-scrollable").html("<iframe src='"+d+"' frameborder='0' class='k-content-frame'>"+"This page requires frames in order to show content"+"</iframe>"))},_triggerAction:function(a,b){this.trigger(a,{pane:b[0]})||this[a](b[0])},_dbclick:function(b){var c=this,d=a(b.target),e;if(d.closest(".k-splitter")[0]==c.element[0]){e=d.children(".k-icon:not(.k-resize-handle)");if(e.length!==1)return;e.is(".k-collapse-prev")?c._triggerAction(k,d.prev()):e.is(".k-collapse-next")?c._triggerAction(k,d.next()):e.is(".k-expand-prev")?c._triggerAction(j,d.prev()):e.is(".k-expand-next")&&c._triggerAction(j,d.next())}},_arrowClick:function(b){var c=this;return function(d){var e=a(d.target),f;e.closest(".k-splitter")[0]==c.element[0]&&(e.is(".k-"+b+"-prev")?f=e.parent().prev():f=e.parent().next(),c._triggerAction(b,f))}},_updateSplitBar:function(a,b,c){var d=function(a,b){return b?"<div class='k-icon "+a+"' />":""},e=this.orientation,f=b.resizable!==!1&&c.resizable!==!1,g=b.collapsible,h=b.collapsed,i=c.collapsible,j=c.collapsed;a.addClass("k-splitbar k-state-default k-splitbar-"+e).removeClass("k-splitbar-"+e+"-hover").toggleClass("k-splitbar-draggable-"+e,f&&!h&&!j).toggleClass("k-splitbar-static-"+e,!f&&!g&&!i).html(d("k-collapse-prev",g&&!h&&!j)+d("k-expand-prev",g&&h&&!j)+d("k-resize-handle",f)+d("k-collapse-next",i&&!j&&!h)+d("k-expand-next",i&&j&&!h))},_updateSplitBars:function(){var b=this;this.element.children(".k-splitbar").each(function(){var c=a(this),d=c.prev(v).data(s),e=c.next(v).data(s);!e||b._updateSplitBar(c,d,e)})},_contentFrames:function(b){return a(b).siblings(v).find("> .k-content-frame")},_resize:function(){var b=this,c=b.element,d=c.children(":not(.k-splitbar)"),e=b.orientation==o,f=c.children(".k-splitbar"),g=f.length,h=e?"width":"height",i=c[h]();g===0?(g=d.length-1,d.slice(0,g).after("<div class='k-splitbar' />"),b._updateSplitBars(),f=c.children(".k-splitbar")):b._updateSplitBars(),f.each(function(){i-=this[e?"offsetWidth":"offsetHeight"]});var j=0,k=0,l=a();d.css({position:"absolute",top:0})[h](function(){var b=a(this).data(s)||{},c;if(b.collapsed)c=0,a(this).css("overflow","hidden");else{if(y(b.size)){l=l.add(this);return}c=parseInt(b.size,10),w(b.size)&&(c=Math.floor(c*i/100))}k++,j+=c;return c}),i-=j;var m=l.length,p=Math.floor(i/m);l.slice(0,m-1).css(h,p).end().eq(m-1).css(h,i-(m-1)*p);var q=0,r=e?"height":"width",t=e?"left":"top",u=e?"offsetWidth":"offsetHeight";if(m===0){var v=d.filter(function(){return!(a(this).data(s)||{}).collapsed}).last();v[h](i+v[0][u])}c.children().css(r,c[r]()).each(function(a,b){b.style[t]=Math.floor(q)+"px",q+=b[u]}),b.trigger(n)},toggle:function(c,d){var e;c=a(c),e=c.data(s),arguments.length==1&&(d=e.collapsed===b?!1:e.collapsed),e.collapsed=!d,e.collapsed?c.css("overflow","hidden"):c.css("overflow",""),this.trigger(m)},collapse:function(a){this.toggle(a,!1)},expand:function(a){this.toggle(a,!0)},size:z("size",!0),min:z("min"),max:z("max")});d.plugin(A);var B={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},C={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};D.prototype={_createHint:function(b){var c=this;return a("<div class='k-ghost-splitbar k-ghost-splitbar-"+c.orientation+" k-state-default' />").css(c.alternateSizingProperty,b[c.alternateSizingProperty]())},_start:function(b){var c=this,d=a(b.currentTarget),e=d.prev(),f=d.next(),g=e.data(s),h=f.data(s),i=parseInt(e[0].style[c.positioningProperty],10),j=parseInt(f[0].style[c.positioningProperty],10)+f[0][c.sizingDomProperty]-d[0][c.sizingDomProperty],k=c._element.css(c.sizingProperty),l=function(a){var b=parseInt(a,10);return(x(a)?b:k*b/100)||0},m=l(g.min),n=l(g.max)||j-i,o=l(h.min),p=l(h.max)||j-i;c.previousPane=e,c.nextPane=f,c._maxPosition=Math.min(j-o,i+n),c._minPosition=Math.max(i+m,j-p)},_max:function(a){return this._maxPosition},_min:function(a){return this._minPosition},_stop:function(b){var d=this,e=a(b.currentTarget),f=d.owner;f._contentFrames(e).next(".k-overlay").remove();if(b.keyCode!==c.keys.ESC){var g=b.position,h=e.prev(),i=e.next(),j=h.data(s),k=i.data(s),l=g-parseInt(h[0].style[d.positioningProperty],10),n=parseInt(i[0].style[d.positioningProperty],10)+i[0][d.sizingDomProperty]-g-e[0][d.sizingDomProperty],o=d._element.children(v).filter(function(){return y(a(this).data(s).size)}).length;if(!y(j.size)||o>1)y(j.size)&&o--,j.size=l+"px";if(!y(k.size)||o>1)k.size=n+"px";f.trigger(m)}return!1}}})(jQuery);