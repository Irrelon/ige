/*
* Kendo UI Web v2012.2.710 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at http://kendoui.com/web-license
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function R(a){return typeof a!==F}function P(a,c){var d=h(a.getAttribute(c));d===null&&(d=b);return d}function O(a){a=parseFloat(a,10);var b=k.pow(10,D||0);return k.round(a*b)/b}function N(a){return(a+"").replace(".",c.cultures.current.numberFormat["."])}function M(a){return function(){return a}}function L(a){return function(b){return b+a}}function K(a){var b=a.is("input")?1:2;return"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><a href='#' class='k-draghandle' title='Drag'>Drag</a>"+(b>1?"<a href='#' class='k-draghandle' title='Drag'>Drag</a>":"")+"</div>"}function J(a,b){var c="<ul class='k-reset k-slider-items'>",d=k.floor(O(b/a.smallStep))+1,e;for(e=0;e<d;e++)c+="<li class='k-tick'>&nbsp;</li>";c+="</ul>";return c}function I(a,b,c){var d="";b=="increase"?d=c?"k-i-arrow-e":"k-i-arrow-n":d=c?"k-i-arrow-w":"k-i-arrow-s";return"<a class='k-button k-button-"+b+"'><span class='k-icon "+d+"' title='"+a[b+"ButtonTitle"]+"'>"+a[b+"ButtonTitle"]+"</span></a>"}function H(a,b,c){var d=c?" k-slider-horizontal":" k-slider-vertical",e=a.style?a.style:b.attr("style"),f=b.attr("class")?" "+b.attr("class"):"",g="";a.tickPlacement=="bottomRight"?g=" k-slider-bottomright":a.tickPlacement=="topLeft"&&(g=" k-slider-topleft"),e=e?" style='"+e+"'":"";return"<div class='k-widget k-slider"+d+f+"'"+e+">"+"<div class='k-slider-wrap"+(a.showButtons?" k-slider-buttons":"")+g+"'></div></div>"}var c=window.kendo,d=c.ui.Widget,e=c.ui.Draggable,f=a.extend,g=c.format,h=c.parseFloat,i=a.proxy,j=a.isArray,k=Math,l=c.support,m=l.touch,n=l.pointers,o="change",p="slide",q=m?"touchstart":"mousedown",r=m?"touchstart":n?"MSPointerDown":"mousedown",s=m?"touchend":"mouseup",t="moveSelection",u="keydown",v="click",w="mouseover",x=".k-draghandle",y=".k-slider-track",z=".k-tick",A="k-state-selected",B="k-state-default",C="k-state-disabled",D=3,E="disabled",F="undefined",G=d.extend({init:function(a,b){var e=this;d.fn.init.call(e,a,b),b=e.options,e._distance=b.max-b.min,e._isHorizontal=b.orientation=="horizontal",e._position=e._isHorizontal?"left":"bottom",e._size=e._isHorizontal?"width":"height",e._outerSize=e._isHorizontal?"outerWidth":"outerHeight",b.tooltip.format=b.tooltip.enabled?b.tooltip.format||"{0}":"{0}",e._createHtml(),e.wrapper=e.element.closest(".k-slider"),e._trackDiv=e.wrapper.find(y),e._setTrackDivWidth(),e._maxSelection=e._trackDiv[e._size]();var f=e._maxSelection/((b.max-b.min)/b.smallStep),g=e._calculateItemsWidth(k.floor(e._distance/b.smallStep));b.tickPlacement!="none"&&f>=2&&(e._trackDiv.before(J(b,e._distance)),e._setItemsWidth(g),e._setItemsTitle(),e._setItemsLargeTick()),e._calculateSteps(g),e[b.enabled?"enable":"disable"](),e._keyMap={37:L(-b.smallStep),40:L(-b.smallStep),39:L(+b.smallStep),38:L(+b.smallStep),35:M(b.max),36:M(b.min),33:L(+b.largeStep),34:L(-b.largeStep)},c.notify(e)},events:[o,p],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_setTrackDivWidth:function(){var a=this,b=parseFloat(a._trackDiv.css(a._position),10)*2;a._trackDiv[a._size](a.wrapper[a._size]()-2-b)},_setItemsWidth:function(b){var c=this,d=c.options,e=0,f=b.length-1,g=c.wrapper.find(z),h,i=0,j=2,k=g.length,l=0;for(h=0;h<k-2;h++)a(g[h+1])[c._size](b[h]);c._isHorizontal?(a(g[e]).addClass("k-first")[c._size](b[f-1]),a(g[f]).addClass("k-last")[c._size](b[f])):(a(g[f]).addClass("k-first")[c._size](b[f]),a(g[e]).addClass("k-last")[c._size](b[f-1]));if(c._distance%d.smallStep!==0&&!c._isHorizontal){for(h=0;h<b.length;h++)l+=b[h];i=c._maxSelection-l,i+=parseFloat(c._trackDiv.css(c._position),10)+j,c.wrapper.find(".k-slider-items").css("padding-top",i)}},_setItemsTitle:function(){var b=this,c=b.options,d=b.wrapper.find(z),e=c.min,f=d.length,h=b._isHorizontal?0:f-1,i=b._isHorizontal?f:-1,j=b._isHorizontal?1:-1;for(;h-i!==0;h+=j)a(d[h]).attr("title",g(c.tooltip.format,O(e))),e+=c.smallStep},_setItemsLargeTick:function(){var b=this,c=b.options,d,e=b.wrapper.find(z),f={},g=O(c.largeStep/c.smallStep);if(1e3*c.largeStep%(1e3*c.smallStep)===0)if(b._isHorizontal)for(d=0;d<e.length;d=O(d+g))f=a(e[d]),f.addClass("k-tick-large").html("<span class='k-label'>"+f.attr("title")+"</span>");else for(d=e.length-1;d>=0;d=O(d-g))f=a(e[d]),f.addClass("k-tick-large").html("<span class='k-label'>"+f.attr("title")+"</span>"),d!==0&&d!==e.length-1&&f.css("line-height",f[b._size]()+"px")},_calculateItemsWidth:function(a){var b=this,c=b.options,d=parseFloat(b._trackDiv.css(b._size))+1,e=d/b._distance,f,g,h;b._distance/c.smallStep-k.floor(b._distance/c.smallStep)>0&&(d-=b._distance%c.smallStep*e),f=d/a,g=[];for(h=0;h<a-1;h++)g[h]=f;g[a-1]=g[a]=f/2;return b._roundWidths(g)},_roundWidths:function(a){var b=0,c=a.length,d;for(d=0;d<c;d++)b+=a[d]-k.floor(a[d]),a[d]=k.floor(a[d]);b=k.round(b);return this._addAdditionalSize(b,a)},_addAdditionalSize:function(a,b){if(a===0)return b;var c=parseFloat(b.length-1)/parseFloat(a==1?a:a-1),d;for(d=0;d<a;d++)b[parseInt(k.round(c*d),10)]+=1;return b},_calculateSteps:function(a){var b=this,c=b.options,d=c.min,e=0,f=k.ceil(b._distance/c.smallStep),g=1,h;f+=b._distance/c.smallStep%1===0?1:0,a.splice(0,0,a[f-2]*2),a.splice(f-1,1,a.pop()*2),b._pixelSteps=[e],b._values=[d];if(f!==0){while(g<f)e+=(a[g-1]+a[g])/2,b._pixelSteps[g]=e,b._values[g]=d+=c.smallStep,g++;h=b._distance%c.smallStep===0?f-1:f,b._pixelSteps[h]=b._maxSelection,b._values[h]=c.max}},_getValueFromPosition:function(a,b){var c=this,d=c.options,e=k.max(d.smallStep*(c._maxSelection/c._distance),0),f=0,g=e/2,h;c._isHorizontal?f=a-b.startPoint:f=b.startPoint-a;if(c._maxSelection-(parseInt(c._maxSelection%e,10)-3)/2<f)return d.max;for(h=0;h<c._pixelSteps.length;h++)if(k.abs(c._pixelSteps[h]-f)-1<=g)return O(c._values[h])},_getDragableArea:function(){var a=this,b=a._trackDiv.offset().left,c=a._trackDiv.offset().top;return{startPoint:a._isHorizontal?b:c+a._maxSelection,endPoint:a._isHorizontal?b+a._maxSelection:c}},_createHtml:function(){var a=this,b=a.element,c=a.options,d=b.find("input");d.length==2?(d.eq(0).val(c.selectionStart),d.eq(1).val(c.selectionEnd)):b.val(c.value),b.wrap(H(c,b,a._isHorizontal)).hide(),c.showButtons&&b.before(I(c,"increase",a._isHorizontal)).before(I(c,"decrease",a._isHorizontal)),b.before(K(b))}}),Q=function(a){return{idx:0,x:a.pageX,y:a.pageY}};l.pointers&&(Q=function(a){return{idx:0,x:a.originalEvent.clientX,y:a.originalEvent.clientY}}),l.touch&&(Q=function(b,c){var d=b.changedTouches||b.originalEvent.changedTouches;if(c){var e=null;a.each(d,function(a,b){c==b.identifier&&(e={idx:b.identifier,x:b.pageX,y:b.pageY})});return e}return{idx:d[0].identifier,x:d[0].pageX,y:d[0].pageY}});var S=G.extend({init:function(c,d){var e=this,g;c.type="text",d=f({},{value:P(c,"value"),min:P(c,"min"),max:P(c,"max"),smallStep:P(c,"step")},d),c=a(c),d&&d.enabled===b&&(d.enabled=!c.is("[disabled]")),G.fn.init.call(e,c,d),d=e.options,R(d.value)||(d.value=d.min,c.val(d.min)),g=e.wrapper.find(x),new S.Selection(g,e,d),e._drag=new S.Drag(g,"",e,d)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",tooltip:{format:"{0}"}},enable:function(b){var d=this,e=d.options,f,g;d.disable();if(b!==!1){d.wrapper.removeClass(C).addClass(B),d.wrapper.find("input").removeAttr(E),f=function(b){var c=Q(b),e=d._isHorizontal?c.x:c.y,f=d._getDragableArea(),g=a(b.target);g.hasClass("k-draghandle")?g.addClass(A):(d._update(d._getValueFromPosition(e,f)),d._drag.dragstart(b))},d.wrapper.find(z+", "+y).bind(r,f).end().bind(r,function(){a(document.documentElement).one("selectstart",c.preventDefault)}),d.wrapper.find(x).bind(s,function(b){a(b.target).removeClass(A)}).bind(v,function(a){a.preventDefault()}),g=i(function(a){d._setValueInRange(d._nextValueByIndex(d._valueIndex+a*1))},d);if(e.showButtons){var h=i(function(a,b){if(a.which===1||m&&a.which===0)g(b),this.timeout=setTimeout(i(function(){this.timer=setInterval(function(){g(b)},60)},this),200)},d);d.wrapper.find(".k-button").bind(s,i(function(a){this._clearTimer()},d)).bind(w,function(b){a(b.currentTarget).addClass("k-state-hover")}).bind("mouseout",i(function(b){a(b.currentTarget).removeClass("k-state-hover"),this._clearTimer()},d)).eq(0).bind(q,i(function(a){h(a,1)},d)).click(!1).end().eq(1).bind(q,i(function(a){h(a,-1)},d)).click(!1)}d.wrapper.find(x).bind(u,i(this._keydown,d)),e.enabled=!0}},disable:function(){var b=this;b.wrapper.removeClass(B).addClass(C),a(b.element).attr(E,E),b.wrapper.find(".k-button").unbind(q).bind(q,c.preventDefault).unbind(s).bind(s,c.preventDefault).unbind("mouseleave").bind("mouseleave",c.preventDefault).unbind(w).bind(w,c.preventDefault),b.wrapper.find(z+", "+y).unbind(r),b.wrapper.find(x).unbind(s).unbind(u).unbind(v).bind(u,!1),b.options.enabled=!1},_update:function(a){var b=this,c=b.value()!=a;b.value(a),c&&b.trigger(o,{value:b.options.value})},value:function(a){var b=this,c=b.options;a=O(a);if(isNaN(a))return c.value;a>=c.min&&a<=c.max&&c.value!=a&&(b.element.attr("value",N(a)),c.value=a,b._refresh())},_refresh:function(){this.trigger(t,{value:this.options.value})},_clearTimer:function(a){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(a){var b=this;a.keyCode in b._keyMap&&(b._setValueInRange(b._keyMap[a.keyCode](b.options.value)),a.preventDefault())},_setValueInRange:function(a){var b=this,c=b.options;a=O(a);isNaN(a)?b._update(c.min):(a=k.max(k.min(a,c.max),c.min),b._update(a))},_nextValueByIndex:function(a){var b=this._values.length;return this._values[k.max(0,k.min(a,b-1))]}});S.Selection=function(a,b,c){function d(d){var e=d-c.min,f=b._valueIndex=k.ceil(O(e/c.smallStep)),g=parseInt(b._pixelSteps[f],10),h=b._trackDiv.find(".k-slider-selection"),i=parseInt(a[b._outerSize]()/2,10);h[b._size](g),a.css(b._position,g-i)}d(c.value),b.bind([o,p,t],function(a){d(parseFloat(a.value,10))})},S.Drag=function(a,b,c,d){var f=this;f.owner=c,f.options=d,f.dragHandle=a,f.dragHandleSize=a[c._outerSize](),f.type=b,f.draggable=new e(a,{threshold:0,dragstart:i(f._dragstart,f),drag:i(f.drag,f),dragend:i(f.dragend,f),dragcancel:i(f.dragcancel,f)}),a.click(!1)},S.Drag.prototype={dragstart:function(a){this.draggable.drag._start(a)},_dragstart:function(b){var d=this,e=d.owner,f=d.options,h=f.tooltip,i="",j,l,m;f.enabled?(e.element.unbind(w),d.dragHandle.addClass(A),d.dragableArea=e._getDragableArea(),d.step=k.max(f.smallStep*(e._maxSelection/e._distance),0),d.type?(d.selectionStart=f.selectionStart,d.selectionEnd=f.selectionEnd,e._setZIndex(d.type)):d.oldVal=d.val=f.value,h.enabled&&(h.template&&(j=d.tooltipTemplate=c.template(h.template)),d.tooltipDiv=a("<div class='k-widget k-tooltip'><!-- --></div>").appendTo(document.body),d.type?d.tooltipTemplate?i=j({selectionStart:d.selectionStart,selectionEnd:d.selectionEnd}):(l=g(h.format,d.selectionStart),m=g(h.format,d.selectionEnd),i=l+" - "+m):(d.tooltipInnerDiv="<div class='k-callout k-callout-"+(e._isHorizontal?"s":"e")+"'><!-- --></div>",d.tooltipTemplate?i=j({value:d.val}):i=g(h.format,d.val),i+=d.tooltipInnerDiv),d.tooltipDiv.html(i),d.moveTooltip())):b.preventDefault()},drag:function(a){var b=this,c=b.owner,d=b.options,e=a.x.location,f=a.y.location,h=b.dragableArea.startPoint,i=b.dragableArea.endPoint,j=d.tooltip,k="",l=b.tooltipTemplate,m,n,o;a.preventDefault(),c._isHorizontal?b.val=b.constrainValue(e,h,i,e>=i):b.val=b.constrainValue(f,i,h,f<=i),b.oldVal!=b.val&&(b.oldVal=b.val,b.type?(b.type=="firstHandle"?b.val<b.selectionEnd?b.selectionStart=b.val:b.selectionStart=b.selectionEnd=b.val:b.val>b.selectionStart?b.selectionEnd=b.val:b.selectionStart=b.selectionEnd=b.val,m={values:[b.selectionStart,b.selectionEnd],value:[b.selectionStart,b.selectionEnd]}):m={value:b.val},c.trigger(p,m),j.enabled&&(b.type?b.tooltipTemplate?k=l({selectionStart:b.selectionStart,selectionEnd:b.selectionEnd}):(n=g(j.format,b.selectionStart),o=g(j.format,b.selectionEnd),k=n+" - "+o):(b.tooltipTemplate?k=l({value:b.val}):k=g(j.format,b.val),k+=b.tooltipInnerDiv),b.tooltipDiv.html(k),b.moveTooltip()))},dragcancel:function(a){this.owner._refresh();return this._end()},dragend:function(a){var b=this,c=b.owner;b.type?c._update(b.selectionStart,b.selectionEnd):c._update(b.val);return b._end()},_end:function(){var a=this,b=a.owner;b.options.tooltip.enabled&&b.options.enabled&&a.tooltipDiv.remove(),a.dragHandle.removeClass(A),b.element.bind(w);return!1},moveTooltip:function(){var a=this,b=a.owner,c=0,d=0,e=a.dragHandle.offset(),f=4,g=a.tooltipDiv.find(".k-callout"),h,i,j;a.type?(h=b.wrapper.find(x),i=h.eq(0).offset(),j=h.eq(1).offset(),b._isHorizontal?(c=j.top,d=i.left+(j.left-i.left)/2):(c=i.top+(j.top-i.top)/2,d=j.left)):(c=e.top,d=e.left),b._isHorizontal?(d-=parseInt((a.tooltipDiv.outerWidth()-a.dragHandle[b._outerSize]())/2,10),c-=a.tooltipDiv.outerHeight()+g.height()+f):(c-=parseInt((a.tooltipDiv.outerHeight()-a.dragHandle[b._outerSize]())/2,10),d-=a.tooltipDiv.outerWidth()+g.width()+f),a.tooltipDiv.css({top:c,left:d})},constrainValue:function(a,b,c,d){var e=this,f=0;b<a&&a<c?f=e.owner._getValueFromPosition(a,e.dragableArea):d?f=e.options.max:f=e.options.min;return f}},c.ui.plugin(S);var T=G.extend({init:function(c,d){var e=this,g=a(c).find("input"),h=g.eq(0)[0],i=g.eq(1)[0];h.type="text",i.type="text",d=f({},{selectionStart:P(h,"value"),min:P(h,"min"),max:P(h,"max"),smallStep:P(h,"step")},{selectionEnd:P(i,"value"),min:P(i,"min"),max:P(i,"max"),smallStep:P(i,"step")},d),d&&d.enabled===b&&(d.enabled=!g.is("[disabled]")),G.fn.init.call(e,c,d),d=e.options,R(d.selectionStart)||(d.selectionStart=d.min,g.eq(0).val(d.min)),R(d.selectionEnd)||(d.selectionEnd=d.max,g.eq(1).val(d.max));var j=e.wrapper.find(x);new T.Selection(j,e,d),e._firstHandleDrag=new S.Drag(j.eq(0),"firstHandle",e,d),e._lastHandleDrag=new S.Drag(j.eq(1),"lastHandle",e,d)},options:{name:"RangeSlider",tooltip:{format:"{0}"}},enable:function(b){var d=this,e=d.options,f;d.disable();b!==!1&&(d.wrapper.removeClass(C).addClass(B),d.wrapper.find("input").removeAttr(E),f=function(b){var c=Q(b),f=d._isHorizontal?c.x:c.y,g=d._getDragableArea(),h=d._getValueFromPosition(f,g),i=a(b.target);i.hasClass("k-draghandle")?i.addClass(A):h<e.selectionStart?(d._setValueInRange(h,e.selectionEnd),d._firstHandleDrag.dragstart(b)):h>d.selectionEnd?(d._setValueInRange(e.selectionStart,h),d._lastHandleDrag.dragstart(b)):h-e.selectionStart<=e.selectionEnd-h?(d._setValueInRange(h,e.selectionEnd),d._firstHandleDrag.dragstart(b)):(d._setValueInRange(e.selectionStart,h),d._lastHandleDrag.dragstart(b))},d.wrapper.find(z+", "+y).bind(r,f).end().bind(r,function(){a(document.documentElement).one("selectstart",c.preventDefault)}),d.wrapper.find(x).bind(s,function(b){a(b.target).removeClass(A)}).bind(v,function(a){a.preventDefault()}),d.wrapper.find(x).eq(0).bind(u,i(function(a){this._keydown(a,"firstHandle")},d)).end().eq(1).bind(u,i(function(a){this._keydown(a,"lastHandle")},d)),d.options.enabled=!0)},disable:function(){var a=this;a.wrapper.removeClass(B).addClass(C),a.wrapper.find("input").attr(E,E),a.wrapper.find(z+", "+y).unbind(r),a.wrapper.find(x).unbind(s).unbind(u).unbind(v).bind(u,c.preventDefault),a.options.enabled=!1},_keydown:function(a,b){var c=this,d=c.options.selectionStart,e=c.options.selectionEnd;a.keyCode in c._keyMap&&(b=="firstHandle"?(d=c._keyMap[a.keyCode](d),d>e&&(e=d)):(e=c._keyMap[a.keyCode](e),d>e&&(d=e)),c._setValueInRange(d,e),a.preventDefault())},_update:function(a,b){var c=this,d=c.value(),e=d[0]!=a||d[1]!=b;c.value([a,b]),e&&c.trigger(o,{values:[a,b],value:[a,b]})},value:function(a){return a&&a.length?this._value(a[0],a[1]):this._value()},_value:function(a,b){var c=this,d=c.options,e=d.selectionStart,f=d.selectionEnd;if(isNaN(a)&&isNaN(b))return[e,f];a=O(a),b=O(b),a>=d.min&&a<=d.max&&b>=d.min&&b<=d.max&&a<=b&&(e!=a||f!=b)&&(c.element.find("input").eq(0).attr("value",N(a)).end().eq(1).attr("value",N(b)),d.selectionStart=a,d.selectionEnd=b,c._refresh())},values:function(a,b){return j(a)?this._value(a[0],a[1]):this._value(a,b)},_refresh:function(){var a=this,b=a.options;a.trigger(t,{values:[b.selectionStart,b.selectionEnd],value:[b.selectionStart,b.selectionEnd]}),b.selectionStart==b.max&&b.selectionEnd==b.max&&a._setZIndex("firstHandle")},_setValueInRange:function(a,b){var c=this.options;a=k.max(k.min(a,c.max),c.min),b=k.max(k.min(b,c.max),c.min),a==c.max&&b==c.max&&this._setZIndex("firstHandle"),this._update(k.min(a,b),k.max(a,b))},_setZIndex:function(b){this.wrapper.find(x).each(function(c){a(this).css("z-index",b=="firstHandle"?1-c:c)})}});T.Selection=function(a,b,c){function e(a,c){var d=0,e=0,f=b._trackDiv.find(".k-slider-selection");d=k.abs(a-c),e=a<c?a:c,f[b._size](d),f.css(b._position,e-1)}function d(d){d=d||[];var f=d[0]-c.min,g=d[1]-c.min,h=k.ceil(O(f/c.smallStep)),i=k.ceil(O(g/c.smallStep)),j=b._pixelSteps[h],l=b._pixelSteps[i],m=parseInt(a.eq(0)[b._outerSize]()/2,10);a.eq(0).css(b._position,j-m).end().eq(1).css(b._position,l-m),e(j,l)}d(b.value()),b.bind([o,p,t],function(a){d(a.values)})},c.ui.plugin(T)})(jQuery);