/*
* Kendo UI Web v2012.2.710 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at http://kendoui.com/web-license
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function E(c,d){var e,f=d!==b;if(document.selection){a(c).is(":visible")&&c.focus(),e=document.selection.createRange();if(f)e.move("character",d),e.select();else{var g=c.createTextRange(),h=g.duplicate();g.moveToBookmark(e.getBookmark()),h.setEndPoint("EndToStart",g),d=h.text.length}}else c.selectionStart!==b&&(f?(c.focus(),c.setSelectionRange(d,d)):d=c.selectionStart);return d}function D(a,b){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+a+'" title="'+b+'">'+b+"</span></span>"}var c=window.kendo,d=c.keys,e=c.ui,f=e.Widget,g=c.parseFloat,h=c.support.placeholder,i=c.support.touch,j=c.getCulture,k="change",l="disabled",m="k-input",n="spin",o="touchend",p=i?"touchstart":"mousedown",q=i?"touchmove "+o:"mouseup mouseleave",r="k-state-default",s="k-state-focused",t="k-state-hover",u="mouseenter mouseleave",v=".",w="k-state-selected",x="k-state-disabled",y=i?"number":"text",z=null,A=a.proxy,B={190:".",188:","},C=f.extend({init:function(a,d){var e=this,g=d&&d.step!==b,h,i,j,k,l;f.fn.init.call(e,a,d),d=e.options,a=e.element.addClass(m).bind({keydown:A(e._keydown,e),paste:A(e._paste,e),blur:A(e._focusout,e)}),a.closest("form").bind("reset",function(){setTimeout(function(){e.value(a[0].value)})}),d.placeholder=d.placeholder||a.attr("placeholder"),e._wrapper(),e._arrows(),e._input(),e._text.focus(A(e._click,e)),h=e.min(a.attr("min")),i=e.max(a.attr("max")),j=e._parse(a.attr("step")),d.min===z&&h!==z&&(d.min=h),d.max===z&&i!==z&&(d.max=i),!g&&j!==z&&(d.step=j),l=d.format,l.slice(0,3)==="{0:"&&(d.format=l.slice(3,l.length-1)),k=d.value,e.value(k!==z?k:a.val()),e.enable(!a.is("[disabled]")),c.notify(e)},options:{name:"NumericTextBox",decimals:z,min:z,max:z,value:z,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[k,n],enable:function(a){var b=this,c=b._text.add(b.element),d=b._inputWrapper.unbind(u),e=b._upArrow.unbind(p),f=b._downArrow.unbind(p);b._toggleText(!0),a===!1?(d.removeClass(r).addClass(x),c.attr(l,l)):(d.addClass(r).removeClass(x).bind(u,b._toggleHover),c.removeAttr(l),e.bind(p,function(a){a.preventDefault(),b._spin(1),b._upArrow.addClass(w)}),f.bind(p,function(a){a.preventDefault(),b._spin(-1),b._downArrow.addClass(w)}))},min:function(a){return this._option("min",a)},max:function(a){return this._option("max",a)},step:function(a){return this._option("step",a)},value:function(a){var c=this,d;if(a===b)return c._value;a=c._parse(a),d=c._adjust(a);a===d&&(c._update(a),c._old=c._value)},_adjust:function(a){var b=this,c=b.options,d=c.min,e=c.max;if(a===z)return a;d!==z&&a<d?a=d:e!==z&&a>e&&(a=e);return a},_arrows:function(){var b=this,d,e=b.options,f=e.spinners,g=b.element;d=g.siblings(".k-icon"),d[0]||(d=a(D("n",e.upArrowText)+D("s",e.downArrowText)).insertAfter(g),d.wrapAll('<span class="k-select"/>')),d.bind(q,function(a){(!i||c.eventTarget(a)!=a.currentTarget||a.type===o)&&clearTimeout(b._spinning),d.removeClass(w)}),f||(d.toggle(f),b._inputWrapper.addClass("k-expand-padding")),b._upArrow=d.eq(0),b._downArrow=d.eq(1)},_blur:function(){var a=this;a._toggleText(!0),a._change(a.element.val())},_click:function(a){var b=this;clearTimeout(b._focusing),b._focusing=setTimeout(function(){var c=a.target,d=E(c),e=c.value.substring(0,d),f=b._format(b.options.format),g=f[","],h=new RegExp("\\"+g,"g"),i=new RegExp("([\\d\\"+g+"]+)(\\"+f[v]+")?(\\d+)?"),j=i.exec(e),k=0;j&&(k=j[0].replace(h,"").length,e.indexOf("(")!=-1&&b._value<0&&k++),b._focusin(),E(b.element[0],k)})},_change:function(a){var b=this;b._update(a),a=b._value,b._old!=a&&(b._old=a,b.trigger(k),b.element.trigger(k))},_culture:function(a){return a||j(this.options.culture)},_focusin:function(){var a=this;a._toggleText(!1),a.element.focus(),a._inputWrapper.addClass(s)},_focusout:function(){var a=this;clearTimeout(a._focusing),a._inputWrapper.removeClass(s),a._blur()},_format:function(a,b){var c=this._culture(b).numberFormat;a=a.toLowerCase(),a.indexOf("c")>-1?c=c.currency:a.indexOf("p")>-1&&(c=c.percent);return c},_input:function(){var b=this,c="k-formatted-value",d=b.element.show()[0],e=b.wrapper,f;f=e.find(v+c),f[0]||(f=a("<input />").insertBefore(d).addClass(c)),d.type=y,f[0].type="text",f[0].style.cssText=d.style.cssText,f.attr("placeholder",b.options.placeholder),b._text=f.attr("readonly",!0).addClass(d.className)},_keydown:function(a){var b=this,c=a.keyCode;c==d.DOWN?b._step(-1):c==d.UP?b._step(1):c==d.ENTER&&b._change(b.element.val()),b._prevent(c)&&!a.ctrlKey&&a.preventDefault()},_paste:function(a){var b=this,c=a.target,d=c.value;setTimeout(function(){b._parse(c.value)===z&&b._update(d)})},_prevent:function(a){var b=this,c=b.element[0],e=c.value,f=b.options,g=f.min,h=b._format(f.format),i=h[v],j=f.decimals,k=E(c),l=!0,m;j===z&&(j=h.decimals),a>16&&a<21||a>32&&a<37||a>47&&a<58||a>95&&a<106||a==d.INSERT||a==d.DELETE||a==d.LEFT||a==d.RIGHT||a==d.TAB||a==d.BACKSPACE||a==d.ENTER?l=!1:B[a]===i&&j>0&&e.indexOf(i)==-1?l=!1:!(g===z||g<0)||e.indexOf("-")!=-1||a!=189&&a!=109||k!==0?a==110&&j>0&&e.indexOf(i)==-1&&(m=e.substring(k),c.value=e.substring(0,k)+i+m):l=!1;return l},_option:function(a,c){var d=this,e=d.options;if(c===b)return e[a];c=d._parse(c);if(!!c||a!=="step")e[a]=d._parse(c)},_spin:function(a,b){var c=this;b=b||500,clearTimeout(c._spinning),c._spinning=setTimeout(function(){c._spin(a,50)},b),c._step(a)},_step:function(a){var b=this,c=b.element,d=b._parse(c.val())||0;document.activeElement!=c[0]&&b._focusin(),d+=b.options.step*a,b._update(b._adjust(d)),b.trigger(n)},_toggleHover:function(b){i||a(b.currentTarget).toggleClass(t,b.type==="mouseenter")},_toggleText:function(a){var b=this;a=!!a,b._text.toggle(a),b.element.toggle(!a)},_parse:function(a,b){return g(a,this._culture(b),this.options.format)},_update:function(a){var b=this,d=b.options,e=d.format,f=d.decimals,g=b._culture(),h=b._format(e,g),i;f===z&&(f=h.decimals),a=b._parse(a,g),i=a!==z,i&&(a=parseFloat(a.toFixed(f))),b._value=a=b._adjust(a),b._placeholder(c.toString(a,e,g)),b.element.val(i?a.toString().replace(v,h[v]):"")},_placeholder:function(a){this._text.val(a),!h&&!a&&this._text.val(this.options.placeholder)},_wrapper:function(){var b=this,c=b.element,d;d=c.parents(".k-numerictextbox"),d.is("span.k-numerictextbox")||(d=c.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),d=d.wrap("<span/>").parent()),d[0].style.cssText=c[0].style.cssText,c[0].style.width="",b.wrapper=d.addClass("k-widget k-numerictextbox").show(),b._inputWrapper=a(d[0].firstChild)}});e.plugin(C)})(jQuery);